apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: bitwarden-sync
  namespace: security
spec:
  chart:
    spec:
      chart: app-template
  values:
    controllers:
      bitwarden-sync:
        containers:
          app:
            image:
              # renovate: datasource=docker depName=martadams89/bitwarden-sync
              repository: martadams89/bitwarden-sync
              tag: latest
            env:
              CRON_SCHEDULE: "36 0 * * *"
              BW_TAR_PASS:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_TAR_PASS
              BW_ACCOUNT_SOURCE:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_ACCOUNT_SOURCE
              BW_PASS_SOURCE:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_PASS_SOURCE
              BW_CLIENTID_SOURCE:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_CLIENTID_SOURCE
              BW_CLIENTSECRET_SOURCE:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_CLIENTSECRET_SOURCE
              BW_SERVER_SOURCE:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_SERVER_SOURCE
              BW_ACCOUNT_DEST:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_ACCOUNT_DEST
              BW_PASS_DEST:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_PASS_DEST
              BW_CLIENTID_DEST:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_CLIENTID_DEST
              BW_CLIENTSECRET_DEST:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_CLIENTSECRET_DEST
              BW_SERVER_DEST:
                valueFrom:
                  secretKeyRef:
                    name: bitwarden-sync-secret
                    key: BW_SERVER_DEST
    service:
      app:
        enabled: false
