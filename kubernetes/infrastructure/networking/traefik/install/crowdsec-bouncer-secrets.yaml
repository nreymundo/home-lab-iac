# Crowdsec Secrets
# NOTE: Update the bwSecretId with your actual Bitwarden Secrets Manager secret ID
# The bouncer API key will be generated after Crowdsec LAPI is running:
#   kubectl exec -n crowdsec deploy/crowdsec-lapi -- cscli bouncers add traefik-bouncer
apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  name: crowdsec-bouncer-api-key
  namespace: traefik
spec:
  organizationId: "${BW_ORG_ID}"
  secretName: crowdsec-bouncer-api-key
  authToken:
    secretName: bw-auth-token
    secretKey: token
  onlyMappedSecrets: true
  map:
    - bwSecretId: "REPLACE_WITH_YOUR_BOUNCER_API_KEY_SECRET_ID"
      secretKeyName: CROWDSEC_BOUNCER_API_KEY
