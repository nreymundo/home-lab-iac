---

# Framework Desktop specific packages.
common_extra_packages:
  - vulkan-tools
  - vulkan-headers
  - mesa-vulkan-drivers
  - mesa-demos
  - corefreq
  - ryzenadj
  - topgrade
  - tuned

# COPR repositories.
common_copr_extra_repos:
  - "sunnyyang/corefreq"
  - "shdwchn10/ryzenadj"
  - "lilay/topgrade"

# NetworkManager connections for the Framework laptop running Fedora.
# NOTE: Update the interface name after installing Fedora (find with `ip link show`).
common_nm_connections:
  - name: main
    type: ethernet
    interface: "enp191s0"
    ipv4:
      addresses:
        - 192.168.1.6/24
      gateway: 192.168.1.1
      dns:
        - 192.168.1.1

  - name: vlan10
    type: vlan
    vlan_id: 10
    parent: "enp191s0"
    ipv4:
      addresses:
        - 192.168.10.6/24
      # No gateway or DNS for VLAN

# Kernel parameters.
common_kernel_params_add:
  - "nmi_watchdog=0"
  - "ttm.pages_limit=25165824" # Sets unified memory to ~96GB
  - "ttm.page_pool_size=25165824" # Sets unified memory to ~96GB
  - "amd_iommu=off" # When not using PCI passthrough.

# KVM/libvirt configuration.
kvm_enable_libvirt: true
kvm_enable_cockpit: true

# Podman configuration.
podman_enable_gpu: true
podman_enable_socket: true

# Use the VLAN 10 IP for K3s traffic
k3s_node_ip: 192.168.10.6
k3s_iface: enp191s0.10
