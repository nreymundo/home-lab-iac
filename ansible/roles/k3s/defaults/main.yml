---
# K3s installation defaults
k3s_version: "v1.35.1+k3s1"
k3s_cluster_init: false
k3s_server_args: ""
k3s_agent_args: ""

# Checksums for K3s binaries - ensures integrity verification
k3s_amd64_checksum: "e406ca6e47673d747ab4665c90a9285615fe082e2593343725ed043ae163abbf"
k3s_arm64_checksum: "c8d08bc38ad51be20ba531b3c412855c38d534f99cdff30fde6891b6f555a846"

# Default to inventory IP, but allow overrides (e.g. for VLANs)
k3s_node_ip: "{{ ansible_host }}"
k3s_iface: "{{ ansible_default_ipv4.interface | default('') }}"
k3s_allow_workloads: true

# K3s dependency packages per OS family.
k3s_dependency_packages_by_os:
  Debian:
    - curl
    - open-iscsi
    - cryptsetup
  RedHat:
    - curl
    - iscsi-initiator-utils
    - cryptsetup

k3s_dependency_packages: "{{ k3s_dependency_packages_by_os.get(ansible_os_family, []) }}"

# OS Tuning
k3s_os_tuning_enabled: true
k3s_fs_inotify_max_user_watches: 1048576
k3s_fs_inotify_max_user_instances: 1024
k3s_fs_inotify_max_queued_events: 32768
k3s_nofile_limit: 1048576

# Intel GPU perf counters (for OpenVINO stats in containers)
k3s_enable_gpu_perf_sysctl: true
k3s_perf_event_paranoid: 0
k3s_kptr_restrict: 0
