{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":disableDependencyDashboard",
    ":disableRateLimiting"
  ],
  "enabledManagers": ["flux", "helm-values", "dockerfile", "kubernetes"],
  "flux": {
    "fileMatch": [
      "^kubernetes/infrastructure/.*/helmrelease\\.yaml$",
      "^kubernetes/apps/.*/helmrelease\\.yaml$"
    ]
  },
  "kubernetes": {
    "fileMatch": [
      "^kubernetes/infrastructure/.*/helmrelease\\.yaml$",
      "^kubernetes/apps/.*/helmrelease\\.yaml$",
      "^kubernetes/renovate/.*\\.yaml$"
    ]
  },
  "automerge": true,
  "automergeType": "pr",
  "automergeSchedule": ["on Sunday after 9pm"],
  "platformAutomerge": false,
  "packageRules": [
    {
      "description": "Auto-merge non-major updates",
      "matchUpdateTypes": ["minor", "patch", "digest"],
      "automerge": true
    },
    {
      "description": "Require review for major updates",
      "matchUpdateTypes": ["major"],
      "automerge": false
    },
    {
      "description": "Ignore flux-system components (managed by Flux)",
      "matchPaths": ["kubernetes/clusters/production/flux-system/**"],
      "enabled": false
    }
  ],
  "labels": ["dependencies", "renovate"],
  "commitMessagePrefix": "chore(deps)",
  "commitMessageAction": "Update",
  "assignees": [],
  "timezone": "UTC"
}
